generator client {
  provider = "prisma-client-js"
}

generator erd {
  provider = "prisma-erd-generator"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Client {
  id         String    @id @default(cuid())
  name       String
  email      String
  password   String
  phone      String
  photo      String?
  location   Location? @relation(fields: [locationId], references: [id])
  locationId String
  createdAt  DateTime  @default(now())
  text       String
  Comment    Comment?  @relation(fields: [commentId], references: [id])
  commentId  String?
  Post       Post?     @relation(fields: [postId], references: [id])
  postId     String?
  Reply      Reply?    @relation(fields: [replyId], references: [id])
  replyId    String?
}

model Provider {
  id          String    @id @default(cuid())
  name        String
  email       String
  password    String
  phone       String
  photo       String?
  service     Service?  @relation(fields: [serviceId], references: [id])
  serviceId   String?
  location    Location? @relation(fields: [locationId], references: [id])
  locationId  String?
  createdAt   DateTime  @default(now())
  text        String
  starAverage Float
  medals      Medals[]
  comment     Comment?  @relation(fields: [commentId], references: [id])
  commentId   String?
  reply       Reply?    @relation(fields: [replyId], references: [id])
  replyId     String?
  post        Post?     @relation(fields: [postId], references: [id])
  postId      String?
}

model Location {
  id       String     @id @default(cuid())
  city     String
  client   Client[]
  provider Provider[]
}

model Service {
  id       String     @id @default(cuid())
  type     String
  provider Provider[]
  banner   Banner[]
  post     Post[]
}

model Comment {
  id       String     @id @default(cuid())
  stars    Int
  text     String
  reply_id String?
  Post     Post?      @relation(fields: [postId], references: [id])
  postId   String?
  reply    Reply?     @relation(fields: [replyId], references: [id])
  replyId  String?
  Client   Client[]
  Provider Provider[]
  
}

model Reply {
  id       String     @id @default(cuid())
  text     String
  Comment  Comment[]
  Client   Client[]
  Provider Provider[]
}

model Medals {
  id         String    @id @default(cuid())
  type       String
  provider   Provider? @relation(fields: [providerId], references: [id])
  providerId String?
}

model Banner {
  id        String   @id @default(cuid())
  photo     String
  service   Service? @relation(fields: [serviceId], references: [id])
  serviceId String?
  phone     String
  accept    Boolean
}

model Post {
  id          String     @id @default(cuid())
  title       String
  description String
  photo       String
  service     Service    @relation(fields: [serviceId], references: [id])
  serviceId   String
  Client      Client[]
  comment     Comment[]
  createdAt   DateTime   @default(now())
  Provider    Provider[]
}
