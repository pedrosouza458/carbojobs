generator client {
  provider = "prisma-client-js"
}

generator erd {
  provider = "prisma-erd-generator"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Client {
  id         String    @id @default(cuid())
  name       String
  email      String
  password   String
  phone      String
  photo      String?
  location   Location? @relation(fields: [locationId], references: [id])
  locationId String
  createdAt  DateTime  @default(now())
  text       String
  comment    Comment[]
  post       Post[]
}

model Provider {
  id          String    @id @default(cuid())
  name        String
  email       String
  password    String
  phone       String
  photo       String?
  service     Service?  @relation(fields: [serviceId], references: [id])
  serviceId   String?
  location    Location? @relation(fields: [locationId], references: [id])
  locationId  String?
  createdAt   DateTime  @default(now())
  text        String
  starAverage Float
  medals      Medals[]
  comment     Comment[]
  post        Post[]
}

model Location {
  id       String     @id @default(cuid())
  city     String
  client   Client[]
  provider Provider[]
}

model Service {
  id       String     @id @default(cuid())
  type     String
  provider Provider[]
  banner   Banner[]
  post     Post[]
}

model Comment {
  id          String    @id @default(cuid())
  stars       Int
  text        String
  replyId     String?   @unique
  reply       Comment?  @relation("CommentsReply", fields: [replyId], references: [id])
  predecessor Comment?  @relation("CommentsReply")
  client      Client?   @relation(fields: [clientId], references: [id])
  clientId    String?
  provider    Provider? @relation(fields: [providerId], references: [id])
  providerId  String?
  Post        Post?     @relation(fields: [postId], references: [id])
  postId      String?
}

model Medals {
  id         String    @id @default(cuid())
  type       String
  provider   Provider? @relation(fields: [providerId], references: [id])
  providerId String?
}

model Banner {
  id        String  @id @default(cuid())
  photo     String
  service   Service? @relation(fields: [serviceId], references: [id])
  serviceId String?
  phone     String
  accept    Boolean
}

model Post {
  id          String    @id @default(cuid())
  title       String
  description String
  photo       String
  service     Service   @relation(fields: [serviceId], references: [id])
  serviceId   String
  Client      Client?   @relation(fields: [clientId], references: [id])
  clientId    String?
  Provider    Provider? @relation(fields: [providerId], references: [id])
  providerId  String?
  comment     Comment[]
  createdAt   DateTime  @default(now())
}
